<app-toolbar></app-toolbar>

@if (myPage) {
<div class="score-container">
  <div class="score-title">PUNTOS</div>
  <div class="score">{{ data.score }}</div>
</div>
}

<h1 class="title">{{ 'Album de ' + data.username}}</h1>

<div class="selector">
  <span class="selector-item" id="selector-index" (click)="changeSortCriteria('index')" [class.selected]="sortCriteria === 'index'">√çndice</span>
  <span class="selector-item">//</span>
  <span class="selector-item" id="selector-idolID" (click)="changeSortCriteria('idolID')" [class.selected]="sortCriteria === 'idolID'">Idol</span>
  <span class="selector-item">//</span>
  <span class="selector-item" id="selector-group" (click)="changeSortCriteria('group')" [class.selected]="sortCriteria === 'group'">Grupo</span>
  <span class="selector-item">//</span>
  <span class="selector-item" id="selector-attack" (click)="changeSortCriteria('attack')" [class.selected]="sortCriteria === 'attack'">Ataque</span>
  <span class="selector-item">//</span>
  <span class="selector-item" id="selector-defense" (click)="changeSortCriteria('defense')" [class.selected]="sortCriteria === 'defense'">Defensa</span>
  <span class="selector-item">//</span>
  <span class="selector-item" id="selector-hp" (click)="changeSortCriteria('hp')" [class.selected]="sortCriteria === 'hp'">HP</span>
</div>

<div class="search">
  <input type="text" class="search-input" placeholder="Buscar..." (input)="search($event)">
</div>

<div class="photoCardsContainer">
  <div class="card-box" *ngFor="let card of data.photoCards" [class.flipped]="card.flipped" (click)="flipCard(card)">
    <div class="card-inner">
      <div class="card-front">
        <div class="card-photo-wrapper">
          <img [src]="card.photo" [alt]="card.idolID" class="card-photo">
        </div>
      </div>
      <div class="card-back">
        <div class="card-name">
          <span>{{ card.name }}</span> <span> - </span> <span>{{ card.band }}</span>
        </div>
        <div class="card-details">
          <div class="card-separator"></div>
          <div class="card-stats">
            <p><span class="stat-label">Posicion</span> <span class="stat-value">{{ card.initialIndex + 1 }}</span></p>
            <p><span class="stat-label">Idol</span> <span class="stat-value">{{ card.idolID }}</span></p>
            <p><span class="stat-label">Popularidad</span> <span class="stat-value">{{ card.popularity }}</span></p>
            <p><span class="stat-label">Tipo</span> <span class="stat-value">{{ card.type}}</span></p>
            <p><span class="stat-label">Subtipo</span> <span class="stat-value">{{ card.type2 }}</span></p>
            <p><span class="stat-label">HP</span> <span class="stat-value">{{ card.hp }}</span></p>
            <p><span class="stat-label">ATK</span> <span class="stat-value">{{ card.attack }}</span></p>
            <p><span class="stat-label">DEF</span> <span class="stat-value">{{ card.defense }}</span></p>
          </div>

          @if (myPage) {
            <button id="select" class="card-action" (click)="selectCard(card); $event.stopPropagation()"></button>
            <button id="offer" class="card-action" (click)="offerCard(card); $event.stopPropagation()"></button>
            <button id="delete" class="card-action" (click)="deleteCard(card); $event.stopPropagation()"></button>
          }

        </div>
      </div>
    </div>
  </div>
</div>
